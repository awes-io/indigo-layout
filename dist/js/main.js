/**
 * Bundle of awes-layout-crm
 * Generated: 2019-01-10
 * Version: 0.0.2
 */

!function(){"use strict";function t(t,e){return(t=t/e-1)*t*t+1}function e(t,e){return(t/=e/2)<1?t*t*t/2:((t-=2)*t*t+2)/2}function s(){const t=location.href;return t.substring(0,t.indexOf("#"))}function i(){this.installed||(this.installed=!0,Vue.prototype.$awesLayoutCrm=new Vue(a),Vue.component("content-wrapper",r),Vue.component("frame-nav",c),Vue.component("modal-window",d),Vue.component("slide-up-down",l))}function n(){Vue.use(Toasted),Vue.toasted.register("awes_success",v("circle-check"),p),Vue.toasted.register("awes_error",v("circle-cross"),Object.assign({},p,{type:"error"})),AWES.notify=function({status:status="success",title:title,message:message}){f.includes(status)&&Vue.prototype.$toasted.global[`awes_${status}`]({title:title,message:message})}}var o={state:{},mutations:{setData(t,e){Vue.set(t,e.param,e.data)}}};var a={data(){return{togglenav:!1,showSearch:!1,showUserMenu:!1,stActive:!1}},methods:{toggleBodyFix(t){document.documentElement.classList[t?"add":"remove"]("body-overflow-hidden")},openNav(){1==this.togglenav?(this.togglenav=!1,this.toggleBodyFix(!1)):(this.togglenav=!0,this.toggleBodyFix(!0))},overlayClick(){this.showUserMenu=!1,this.togglenav=!1,this.toggleBodyFix(!1)},notify(t,e="success",s="bottom-right"){this.$notify({group:"bottom-right",type:e,title:e,text:t})}},watch:{showUserMenu(t){this.toggleBodyFix(t)}}};var r=function(t,e,s,i,n,o,a,r){const l=("function"==typeof s?s.options:s)||{};return l.__file="content-wrapper.vue",l.render||(l.render=t.render,l.staticRenderFns=t.staticRenderFns,l._compiled=!0,n&&(l.functional=!0)),l._scopeId=i,l}({render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",[t._t("default",null,{data:t.content})],2)},staticRenderFns:[]},void 0,{name:"content-wrapper",props:{data:{type:Object,default:null},storeData:{type:String,require:!0}},created(){this.$awesLayoutCrm.$store&&this.$awesLayoutCrm.$store.commit("setData",{param:this.storeData,data:this.data})},computed:{content(){return this.$awesLayoutCrm.$store&&this.$awesLayoutCrm.$store.state[this.storeData]}}},void 0,!1,void 0,void 0,void 0);var l=function(t,e,s,i,n,o,a,r){const l=("function"==typeof s?s.options:s)||{};return l.__file="slide-up-down.vue",l.render||(l.render=t.render,l.staticRenderFns=t.staticRenderFns,l._compiled=!0,n&&(l.functional=!0)),l._scopeId=i,l}({},void 0,{name:"slide-up-down",props:{show:Boolean,tag:{type:String,default:"div"},slideUpDuration:{type:Number,default:250},slideDownDuration:{type:Number,default:300}},data(){return{isAnimating:!1,isOpened:this.show}},watch:{show(t){this.isOpened=t}},methods:{slideDown(e,s){const i=e.offsetHeight,n=(new Date).getTime();e.style.height=0,e.style.opacity=0;const o=()=>{let a=(new Date).getTime()-n;if(a<this.slideDownDuration){let s=t(a,this.slideDownDuration);e.style.height=`${Math.round(s*i)}px`,e.style.opacity=s.toFixed(1),this.__animDown=requestAnimationFrame(o)}else e.style.height=null,e.style.opacity=null,s()};this.__animDown=requestAnimationFrame(o)},stopDown(){cancelAnimationFrame(this.__animDown)},slideUp(t,s){const i=t.offsetHeight,n=(new Date).getTime(),o=()=>{let a=(new Date).getTime()-n;if(a<this.slideUpDuration){let s=1-e(a,this.slideUpDuration);t.style.height=`${Math.round(s*i)}px`,t.style.opacity=s.toFixed(1),this.__animUp=requestAnimationFrame(o)}else t.style.height=null,t.style.opacity=null,s()};this.__animUp=requestAnimationFrame(o)},stopUp(t){cancelAnimationFrame(this.__animUp),t.style.height=null,t.style.opacity=null},close(){this.isOpened=!1},open(){this.isOpened=!0},toggle(){this.isOpened=!this.isOpened}},render(t){return t("transition",{props:{css:!1},on:{enter:this.slideDown,"enter-cancelled":this.stopDown,leave:this.slideUp,"leave-cancelled":this.stopUp}},[t(this.tag,{class:"slide-up-down",style:{overflow:"hidden"},directives:[{name:"show",value:this.isOpened}]},this.$slots.default)])}},void 0,void 0,void 0,void 0,void 0);var c=function(t,e,s,i,n,o,a,r){const l=("function"==typeof s?s.options:s)||{};return l.__file="frame-nav.vue",l.render||(l.render=t.render,l.staticRenderFns=t.staticRenderFns,l._compiled=!0,n&&(l.functional=!0)),l._scopeId=i,l}({render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"frame__aside-nav-wrap"},[s("ul",{staticClass:"frame__aside-links"},t._l(t.menu,function(e,i){return s("li",{staticClass:"frame__aside-li"},[null!=e.link?s("a",{staticClass:"frame__aside-link",class:{"frame__aside-link_active":e.active},attrs:{href:e.link}},[s("i",{class:"icon icon-"+e.icon}),t._v(" "),s("span",[t._v(t._s(e.title))])]):s("div",[s("a",{staticClass:"frame__aside-link frame__aside-link_sub",class:{"frame__aside-link_active":e.active},attrs:{href:"#"},on:{click:function(s){s.preventDefault(),t.setActive(i,e.active)}}},[s("i",{class:"icon icon-"+e.icon}),t._v(" "),s("span",[t._v(t._s(e.title))]),t._v(" "),s("i",{staticClass:"icon icon-angle-bottom"})]),t._v(" "),s("slide-up-down",{attrs:{show:e.active,slideDownDuration:380,slideUpDuration:210}},[s("ul",{staticClass:"frame__aside-hidden active"},t._l(e.sub,function(e){return s("li",{staticClass:"frame__aside-inlist"},[s("a",{staticClass:"frame__aside-inlink",class:{"frame__aside-inlink_active":e.active},attrs:{href:e.link}},[s("span",{class:{"tf-strong":e.active}},[t._v(t._s(e.title))])])])}),0)])],1)])}),0)])},staticRenderFns:[]},void 0,{name:"frame-nav",data(){return{toggle:!1,active:null,val:!1}},components:{SlideUpDown:l},computed:{menu(){return this.links.map((t,e)=>{null!==this.active&&void 0===t.link&&(t.active=e===this.active&&this.val);return t})}},props:{links:{type:[Object,Array],default:function(){return[]}},title:{type:String,default:"AwesCRM"}},methods:{setActive(t,e){this.val=!e,this.active=t}}},void 0,!1,void 0,void 0,void 0);let u=0;var d=function(t,e,s,i,n,o,a,r){const l=("function"==typeof s?s.options:s)||{};return l.__file="modal-window.vue",l.render||(l.render=t.render,l.staticRenderFns=t.staticRenderFns,l._compiled=!0,n&&(l.functional=!0)),l._scopeId=i,l}({render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"modal-fade"},on:{"after-enter":t.initBottomObserver,"after-leave":t.destroyBottomObserver}},[t.isOpened?s("div",{class:["modal",{"modal_bottom-visible":t.isBottomVisible},{modal_fullscreen:t.fullscreen}]},[s("div",{staticClass:"modal__dialog",class:{"modal-fade__translate":!t.fullscreen},attrs:{role:"dialog"}},[s("div",{staticClass:"modal__header"},[t.fullscreen?s("button",{staticClass:"modal__back",attrs:{type:"button",title:t.$lang.MODAL_BACK,"aria-label":t.$lang.MODAL_BACK},on:{click:function(e){return e.preventDefault(),t.historyBack(e)}}},[t._v("\n                    ←\n                ")]):t._e(),t._v(" "),t.title?s("h2",{staticClass:"modal__title"},[t._v(t._s(t.title))]):t._e(),t._v(" "),s("button",{directives:[{name:"shortkey",rawName:"v-shortkey",value:["esc"],expression:"['esc']"}],staticClass:"modal__close",attrs:{type:"button",title:t.$lang.MODAL_CLOSE,"aria-label":t.$lang.MODAL_CLOSE},on:{shortkey:function(e){t.close(t.name)},click:function(e){e.preventDefault(),t.close(t.name)}}},[t._v("\n                    ×\n                ")])]),t._v(" "),s("div",{staticClass:"modal__content"},[t._t("default")],2),t._v(" "),s("div",{ref:"bottom",staticClass:"modal__bottom"})])]):t._e()])},staticRenderFns:[]},void 0,{name:"modal-window",props:{title:String,name:{type:String,default:()=>`modal-${u++}`},fullscreen:{type:Boolean,default:!1}},data(){return{isOpened:!1,bottomObserver:null,isBottomVisible:!1,closePrevented:!1}},computed:{hash(){return"#modal_"+this.name}},provide(){return{modal:{hash:this.hash,name:this.name}}},watch:{isOpened(t){this.$root.toggleBodyFix(t)}},methods:{open(t){if(t===this.name){const t=s()+this.hash;history.pushState({modal:this.modal},document.title,t),this.isOpened=!0}},close(t){if(t===this.name){if(this.closePrevented)return void this.$root.$emit("modals:on-close-prevented",this.name);history.pushState({},document.title,s()),this.isOpened=!1}},historyBack(){history.back()},hashWatcher(){location.hash!==this.hash||this.isOpened?location.hash!==this.hash&&this.isOpened&&this.close(this.name):this.open(this.name)},initBottomObserver(){this.bottomObserver=new IntersectionObserver(t=>{this.isBottomVisible=t[0].isIntersecting}),this.bottomObserver.observe(this.$refs.bottom)},destroyBottomObserver(){this.bottomObserver.disconnect()},setClosePrevented({name:name,state:state}){name===this.name&&(this.closePrevented=state)}},mounted(){this.hashWatcher(),this.$root.$on("modals:open",this.open),this.$root.$on("modals:close",this.close),this.$root.$on("modals:prevent",this.setClosePrevented),window.addEventListener("hashchange",this.hashWatcher,!1)},beforeDestroy(){this.destroyBottomObserver(),this.$root.$off("modals:open",this.open),this.$root.$off("modals:close",this.close),this.$root.$off("modals:prevent",this.setClosePrevented),window.removeEventListener("hashchange",this.hashWatcher)}},void 0,!1,void 0,void 0,void 0);const h={installed:!1,install:i};var m={MODAL_BACK:"Go back",MODAL_CLOSE:"Close modal"};const f=["success","error"],p={type:"success",position:"bottom-right",duration:2e3},v=t=>({title:title,message:message})=>{let e=`<i class="toasted__icon icon icon-${t}"></i><div class="toasted__content">`;e+=title?`<p class="toasted__title">${title}</p>`:"";return e+message+"</div>"},g={modules:{vue:{src:"https://unpkg.com/vue@2.5.21/dist/vue.js",cb(){Vue.use(h),Vue.config.ignoredElements.push("content-wrapper","frame-nav","modal-window","slide-up-down")}},lodash:{src:"https://unpkg.com/lodash@4.17.11/lodash.min.js",deps:["vue"],cb(){Vue.prototype.$get=_.get}},vuex:{src:"https://unpkg.com/vuex@2.5.0/dist/vuex.min.js",deps:["vue"],cb(){Vue.prototype.$awesLayoutCrm.$store=new Vuex.Store(o)}},"vue-shortkey":{src:"https://unpkg.com/vue-shortkey@3",deps:["vue"],cb(){Vue.use(VueShortkey)}},"vue-toasted":{src:"https://unpkg.com/vue-toasted",deps:["vue"],cb:n},highlight:"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js",highlight_lang_html:{src:"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/languages/javascript.min.js",deps:["highlight"],cb(){document.querySelectorAll("pre code.html").forEach(t=>{hljs.highlightBlock(t)})}},highlight_css:"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/styles/atom-one-dark.min.css"},install(){AWES.lang=m}};window&&"AWES"in window?AWES.use(g):(window.__awes_plugins_stack__=window.__awes_plugins_stack__||[],window.__awes_plugins_stack__.push(g))}();
